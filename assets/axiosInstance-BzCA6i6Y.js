import{c as a,u as c}from"./index-BtL-FlQ5.js";const o=a.create({baseURL:"http://localhost:8000/api/"});o.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t?(e.headers.Authorization=`Bearer ${t}`,console.log("Attaching token to request:",t)):console.log("No token found in localStorage"),e},e=>Promise.reject(e));o.interceptors.response.use(e=>e,async e=>{var r;const t=e.config;if(((r=e.response)==null?void 0:r.status)===401&&!t._retry){t._retry=!0;const{refreshAccessToken:n}=c(),s=await n();if(s)return t.headers.Authorization=`Bearer ${s}`,o(t)}return console.log("401 Unauthorized, clearing localStorage and redirecting to login"),Promise.reject(e)});export{o as a};
